<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <!--Viewport esencial para dise√±o m√≥vil-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CGE App M√≥vil</title>

    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Iconos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <!-- Tu CSS propio -->
    <link rel="stylesheet" href="css/estilos.css">
</head>

<!-- üîπ Fondo general oscuro + app centrada como celular -->
<body class="bg-black flex items-center justify-center min-h-screen">

<div class="w-full max-w-sm h-screen sm:h-[760px] bg-gray-900 text-white flex flex-col rounded-3xl shadow-2xl border border-gray-800 overflow-hidden">

    <!-- ========== LOGIN ========== -->
    <div id="login-screen" class="flex-1 flex flex-col items-center justify-center px-6">
        <div class="w-full">
            <div class="flex items-center justify-center gap-2 mb-4">
                <i class="fas fa-broadcast-tower text-blue-500 text-2xl"></i>
                <div>
                    <h1 class="text-lg font-bold leading-tight">CGE Torre M√≥vil</h1>
                    <p class="text-xs text-gray-400">Acceso a supervisi√≥n</p>
                </div>
            </div>
            <h2 class="text-base font-semibold mb-2 text-center">Iniciar sesi√≥n</h2>
            <p class="text-[0.7rem] text-gray-400 mb-4 text-center">
                Para la demo pueden usar cualquier correo y clave (solo validamos que no est√©n vac√≠os).
            </p>
            <form id="login-form" class="space-y-3">
                <div>
                    <label for="login-user" class="block text-xs text-gray-300 mb-1">Correo</label>
                    <input id="login-user" type="email"
                        class="w-full rounded-lg bg-gray-800 border border-gray-700 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                <div>
                    <label for="login-pass" class="block text-xs text-gray-300 mb-1">Contrase√±a</label>
                    <input id="login-pass" type="password"
                        class="w-full rounded-lg bg-gray-800 border border-gray-700 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                <p id="login-error" class="text-xs text-red-400 hidden">Ingresa usuario y contrase√±a para continuar.</p>
                <button type="submit"
                    class="w-full mt-2 bg-blue-600 hover:bg-blue-500 text-sm font-semibold py-2 rounded-lg">
                    Iniciar sesi√≥n
                </button>
            </form>
            <p class="text-[0.65rem] text-gray-500 mt-4 text-center">
                Proyecto acad√©mico ¬∑ CGE App M√≥vil
            </p>
        </div>
    </div>

    <!-- ========== APP COMPLETA ========== -->
    <div id="app-screen" class="hidden h-full flex flex-col">

        <!-- Encabezado Superior -->
        <header class="bg-gray-800 shadow-md flex-shrink-0 z-10">
            <div class="px-4 py-3 flex justify-between items-center">
                <h1 class="text-lg font-bold text-white">
                    <i class="fas fa-broadcast-tower text-blue-500"></i>
                    Torre de Control M√≥vil
                </h1>
                <span id="operational-status-dot" class="w-3 h-3 rounded-full bg-gray-500" title="Estado Operacional"></span>
            </div>
        </header>

        <!-- Contenido -->
        <main class="flex-grow overflow-y-auto no-scrollbar">

            <!-- KPIs -->
            <div id="page-kpis" class="page-content p-4">
                <h2 class="text-xl font-semibold text-gray-200 mb-4">Indicadores Clave (KPIs)</h2>
                <section id="kpi-container-mobile" class="grid grid-cols-2 gap-4"></section>
            </div>

            <!-- MAPA -->
            <div id="page-map" class="page-content hidden h-full">
                <div id="map-wrapper" class="relative w-full h-full">
                    <!-- Google Maps real, de fondo -->
                    <iframe
                        class="w-full h-full"
                        style="border:0;"
                        loading="lazy"
                        allowfullscreen
                        referrerpolicy="no-referrer-when-downgrade"
                        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d25562.58079084543!2d-72.625656!3d-38.7396505!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x9614f396e2f80c27%3A0xb2a68f2e2ad3c9d!2sTemuco%2C%20Araucan%C3%ADa!5e0!3m2!1ses-419!2scl!4v1700000000000!5m2!1ses-419!2scl">
                    </iframe>

                    <!-- Capa de pines encima del mapa -->
                    <div id="map-container" class="absolute inset-0 pointer-events-none">
                        <!-- Etiquetas de zonas -->
                        <div class="absolute top-[30%] left-[40%] text-gray-200 font-bold text-xs px-1 py-0.5 bg-black/40 rounded">
                            Temuco
                        </div>
                        <div class="absolute top-[20%] left-[20%] text-gray-200 font-bold text-xs px-1 py-0.5 bg-black/40 rounded">
                            Angol
                        </div>
                        <div class="absolute top-[60%] left-[70%] text-gray-200 font-bold text-xs px-1 py-0.5 bg-black/40 rounded">
                            Villarrica
                        </div>
                        <!-- Aqu√≠ JS seguir√° creando los .brigade-pin -->
                    </div>
                </div>
            </div>


            <!-- BRIGADAS -->
            <div id="page-brigades" class="page-content hidden">
                <div id="brigade-list-container-mobile" class="divide-y divide-gray-700"></div>
            </div>

            <!-- ALERTAS -->
            <div id="page-alerts" class="page-content hidden p-4">
                <h2 class="text-xl font-semibold text-gray-200 mb-4">Alertas Cr√≠ticas</h2>
                <section id="alert-container-mobile" class="space-y-3"></section>
            </div>

            <!-- PERFIL -->
            <div id="page-profile" class="page-content hidden p-4">
                <h2 class="text-xl font-semibold text-gray-200 mb-4">Perfil de usuario</h2>

                <div class="bg-gray-800 rounded-xl p-4 space-y-3">
                    <div class="flex items-center gap-3">
                        <div class="w-12 h-12 rounded-full bg-blue-600 flex items-center justify-center">
                            <i class="fas fa-user-hard-hat text-xl"></i>
                        </div>
                        <div>
                            <p class="text-sm text-gray-400">Operador</p>
                            <p class="text-base font-semibold">Supervisor Demo</p>
                        </div>
                    </div>

                    <div class="grid grid-cols-2 gap-3 text-xs text-gray-300 pt-2">
                        <div>
                            <p class="text-gray-400">Zona</p>
                            <p class="font-semibold">Araucan√≠a</p>
                        </div>
                        <div>
                            <p class="text-gray-400">Turno</p>
                            <p class="font-semibold">D√≠a ¬∑ 08:00‚Äì18:00</p>
                        </div>
                        <div>
                            <p class="text-gray-400">Rol</p>
                            <p class="font-semibold">Torre de control</p>
                        </div>
                        <div>
                            <p class="text-gray-400">Contrato</p>
                            <p class="font-semibold">CGE / Contratistas</p>
                        </div>
                    </div>

                    <button onclick="logout()"
                        class="w-full mt-3 bg-red-600 hover:bg-red-500 text-sm font-semibold py-2 rounded-lg">
                        Cerrar sesi√≥n
                    </button>
                </div>

                <p class="text-[0.65rem] text-gray-500 mt-3">
                    Nota para la presentaci√≥n: este perfil es solo referencial para la demo, no usa datos reales.
                </p>
            </div>

        </main>

        <!-- Navegaci√≥n inferior -->
        <nav class="flex-shrink-0 bg-gray-800 shadow-lg grid grid-cols-5 gap-1">
            <button onclick="showPage('page-kpis', this)" class="tab-item active text-gray-400 py-2 px-1 text-center">
                <i class="fas fa-tachometer-alt text-lg"></i>
                <span class="block text-xs">KPIs</span>
            </button>
            <button onclick="showPage('page-map', this)" class="tab-item text-gray-400 py-2 px-1 text-center">
                <i class="fas fa-map-marked-alt text-lg"></i>
                <span class="block text-xs">Mapa</span>
            </button>
            <button onclick="showPage('page-brigades', this)" class="tab-item text-gray-400 py-2 px-1 text-center">
                <i class="fas fa-users text-lg"></i>
                <span class="block text-xs">Brigadas</span>
            </button>
            <button onclick="showPage('page-alerts', this)" class="tab-item text-gray-400 py-2 px-1 text-center">
                <i class="fas fa-exclamation-triangle text-lg"></i>
                <span class="block text-xs">Alertas</span>
            </button>
            <button onclick="showPage('page-profile', this)" class="tab-item text-gray-400 py-2 px-1 text-center">
                <i class="fas fa-user-circle text-lg"></i>
                <span class="block text-xs">Perfil</span>
            </button>
        </nav>
        <!-- Modal detalle brigada -->
        <div id="detail-modal" class="detail-modal fixed inset-0 bg-gray-900 z-50 transform translate-x-full overflow-y-auto">
            <header class="bg-gray-800 p-4 flex items-center sticky top-0">
                <button onclick="cerrarDetalle()" class="text-blue-400 text-lg">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <h2 class="text-xl font-semibold text-white mx-auto" id="detail-modal-title">Detalle de Brigada</h2>
            </header>
            <div id="detail-modal-content" class="p-4 space-y-5"></div>
        </div>

        <!-- Modal foto -->
        <div id="photo-modal" class="fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-[100] hidden">
            <div class="bg-white p-3 rounded-lg shadow-xl relative max-w-[90vw]">
                <button onclick="cerrarFoto()" class="absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-8 h-8 font-bold">&times;</button>
                <h3 class="text-lg font-semibold mb-2 text-gray-800">Control de Foto</h3>
                <img id="modal-image" src="https://placehold.co/400x300/e2e8f0/64748b?text=Foto" alt="Foto de instalaci√≥n">
                <p id="modal-image-caption" class="text-sm text-gray-600 mt-2">OT: ...</p>
            </div>
        </div>
    </div>
</div>

<!-- Tu JS propio -->
<script src="js/app.js"></script>
</body>
</html>

